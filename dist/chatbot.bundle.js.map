{"version":3,"file":"chatbot.bundle.js","sources":["../src/utils.js","../node_modules/style-inject/dist/style-inject.es.js","../src/renderer.js","../src/api/endpoints","../src/chatbot.js"],"sourcesContent":["// src/utils.js\n\n/**\n * Generates a unique session ID.\n * @returns {string} A unique ID.\n */\nexport function generateUniqueId() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0,\n          v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n/**\n * Stores data in localStorage.\n * @param {string} key - The key to store data under.\n * @param {*} value - The data to store.\n */\nexport function setLocalStorageItem(key, value) {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (e) {\n    console.warn('Chatbot SDK: localStorage write error:', e);\n  }\n}\n\n/**\n * Retrieves data from localStorage.\n * @param {string} key - The key to retrieve data from.\n * @returns {*} The retrieved data, or null if not found/error.\n */\nexport function getLocalStorageItem(key) {\n  try {\n    const item = localStorage.getItem(key);\n    return item ? JSON.parse(item) : null;\n  } catch (e) {\n    console.warn('Chatbot SDK: localStorage read error:', e);\n    return null;\n  }\n}\n\n/**\n * Basic Markdown parsing for bold, italics, links.\n * This is a simplified parser. For full markdown, consider a tiny library if allowed.\n * @param {string} text - The text to parse.\n * @returns {string} HTML string with basic markdown applied.\n */\nexport function parseMarkdown(text) {\n    if (!text) return '';\n    let html = text;\n\n    // Bold: **text** or __text__\n    html = html.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n    html = html.replace(/__(.*?)__/g, '<strong>$1</strong>');\n\n    // Italics: *text* or _text_\n    html = html.replace(/\\*(.*?)\\*/g, '<em>$1</em>');\n    html = html.replace(/_(.*?)_/g, '<em>$1</em>');\n\n    // Links: [text](url)\n    html = html.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>');\n\n    // Line breaks\n    html = html.replace(/\\n/g, '<br/>');\n\n    return html;\n}\n\n/**\n * Dynamically loads an external script.\n * @param {string} url - The URL of the script.\n * @param {string} id - A unique ID for the script tag.\n * @returns {Promise<void>} A promise that resolves when the script is loaded.\n */\nexport function loadScript(url, id) {\n    return new Promise((resolve, reject) => {\n        if (document.getElementById(id)) {\n            return resolve(); // Already loaded\n        }\n        const script = document.createElement('script');\n        script.id = id;\n        script.src = url;\n        script.async = true;\n        script.onload = () => resolve();\n        script.onerror = () => reject(new Error(`Failed to load script: ${url}`));\n        document.head.appendChild(script);\n    });\n}","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","\n// src/renderer.js\nimport { loadScript } from './utils';\n\n// Get reference to the chatbot instance\nconst getChatbot = () => window.ChatbotSDK || { config: {} };\n\n/**\n * Applies styles to an element with priority to message-specific styles\n * @param {HTMLElement} element - The element to style\n * @param {string} component - The component type (e.g., 'buttons', 'carousel')\n * @param {string} elementType - The specific element type (e.g., 'container', 'button')\n * @param {object} [messageStyles] - Style overrides from message data (highest priority)\n */\nfunction applyStyles(element, component, elementType, messageStyles = {}) {\n  const chatbot = getChatbot();\n  \n  // Get base styles from config if they exist\n  const configStyles = chatbot.config.style?.components?.[component]?.[elementType] || {};\n  \n  // Get global message styles if they exist\n  const globalStyles = chatbot.config.style?.messages || {};\n  \n  // Merge styles with message styles taking priority\n  const styles = {\n    ...getDefaultStyles(component, elementType, globalStyles),\n    ...configStyles,\n    ...messageStyles\n  };\n\n  // Apply the combined styles\n  Object.entries(styles).forEach(([prop, value]) => {\n    if (value !== undefined && value !== null) {\n      // Handle CSS custom properties\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        element.style[prop] = value;\n      }\n    }\n  });\n}\n\n/**\n * Gets default styles based on global message styles\n */\nfunction getDefaultStyles(component, elementType, globalStyles) {\n  const defaults = {};\n  \n  switch (component) {\n    case 'buttons':\n      if (elementType === 'button') {\n        defaults.backgroundColor = globalStyles.buttonColor;\n        defaults.color = globalStyles.buttonTextColor;\n      }\n      break;\n    case 'carousel':\n      if (elementType === 'card') {\n        defaults.backgroundColor = globalStyles.botBubbleColor;\n      }\n      if (elementType === 'cardTitle' || elementType === 'cardSubtitle') {\n        defaults.color = globalStyles.botTextColor;\n      }\n      break;\n    case 'faq':\n      if (elementType === 'question') {\n        defaults.color = globalStyles.botTextColor;\n      }\n      break;\n    case 'rating':\n      if (elementType === 'star') {\n        defaults.color = globalStyles.buttonColor;\n      }\n      break;\n  }\n  \n  return defaults;\n}\n\n/**\n * Renders various message types with configured styling\n */\nexport function renderMessage(messageData, type, sendMessageCallback = null) {\n  switch (type) {\n    case 'buttons':\n      return createButtons(messageData.buttons, sendMessageCallback, messageData.style);\n    case 'image':\n      return createImage(messageData.image, messageData.style);\n    case 'video':\n      return createVideo(messageData.video, messageData.style);\n    case 'carousel':\n      return createCarousel(messageData.carousel, sendMessageCallback, messageData.style);\n    default:\n      return null;\n  }\n}\n\n/**\n * Renders custom payload types with configured styling\n */\nexport function renderCustomPayload(customPayload, sendMessageCallback = null) {\n    if (!customPayload) return null;\n\n    const customContainer = document.createElement('div');\n    customContainer.classList.add('chatbot-custom-payload');\n    applyStyles(customContainer, 'custom', 'container', customPayload.style);\n\n    if (customPayload.locations) {\n        const mapEl = createLocationsMap(customPayload.locations, customPayload.style);\n        if (mapEl) customContainer.appendChild(mapEl);\n    }\n    if (customPayload.faq_list) {\n        const faqEl = createFaqList(customPayload.faq_list, customPayload.style);\n        if (faqEl) customContainer.appendChild(faqEl);\n    }\n    if (customPayload.table) {\n        const tableEl = createTable(customPayload.table, customPayload.style);\n        if (tableEl) customContainer.appendChild(tableEl);\n    }\n    if (customPayload.rating) {\n        const ratingEl = createRating(customPayload.rating, sendMessageCallback, customPayload.style);\n        if (ratingEl) customContainer.appendChild(ratingEl);\n    }\n    if (customPayload.forms) {\n        const formEl = createDynamicForm(customPayload.forms, sendMessageCallback, customPayload.style);\n        if (formEl) customContainer.appendChild(formEl);\n    }\n    if (customPayload.video) {\n        const videoEl = createVideo(customPayload.video, customPayload.style);\n        if (videoEl) customContainer.appendChild(videoEl);\n        \n    }\n\n    return customContainer.children.length > 0 ? customContainer : null;\n}\n\n// --- Component Creation Functions ---\n\nfunction createButtons(buttons, sendMessageCallback, styleOverrides = {}) {\n  if (!buttons || buttons.length === 0) return null;\n  \n  const container = document.createElement('div');\n  container.className = 'chatbot-button-container';\n  applyStyles(container, 'buttons', 'container', styleOverrides.container);\n\n  buttons.forEach(btn => {\n    const button = document.createElement('button');\n    button.textContent = btn.title;\n    button.className = 'chatbot-button';\n    \n    // Apply button styles with proper priority\n    applyStyles(button, 'buttons', 'button', {\n      // From button-specific config in message\n      ...(btn.button_color && { backgroundColor: btn.button_color }),\n      ...(btn.button_color && { color: 'white' }),\n      ...(btn.button_color && { borderColor: btn.button_color }),\n      // From style overrides\n      ...styleOverrides.button\n    });\n\n    if (btn.payload) {\n      button.addEventListener('click', () => {\n        container.querySelectorAll('button').forEach(b => b.disabled = true);\n        if (sendMessageCallback) sendMessageCallback(btn.title, btn.payload);\n      });\n    } else if (btn.url) {\n      button.addEventListener('click', () => window.open(btn.url, '_blank'));\n    } else if (btn.question) {\n      button.addEventListener('click', () => {\n        container.querySelectorAll('button').forEach(b => b.disabled = true);\n        if (sendMessageCallback) sendMessageCallback(btn.title, btn.question);\n      });\n    }\n    \n    container.appendChild(button);\n  });\n  \n  return container;\n}\n\nfunction createImage(imageUrl, styleOverrides = {}) {\n  if (!imageUrl) return null;\n  \n  const img = document.createElement('img');\n  img.src = imageUrl;\n  img.className = 'chatbot-image';\n  applyStyles(img, 'image', 'image', styleOverrides);\n  \n  return img;\n}\n\nfunction createVideo(videoObj, styleOverrides = {}) {\n  if (!videoObj.url) return null;\n\n  // Check if the URL is a YouTube link\n  const isYouTube = videoObj.url.includes(\"youtube.com/watch\") || videoObj.url.includes(\"youtu.be\");\n\n  if (isYouTube) {\n    // Extract video ID from URL\n    let videoId;\n    if (videoObj.url.includes(\"youtu.be\")) {\n      videoId = videoObj.url.split(\"/\").pop().split(\"?\")[0];\n    } else {\n      videoId = videoObj.url.split(\"v=\")[1].split(\"&\")[0];\n    }\n\n    const iframe = document.createElement(\"iframe\");\n    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=0`;\n    iframe.width = \"250\";\n    iframe.height = \"140\";\n    iframe.allow = \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\";\n    iframe.allowFullscreen = true;\n\n    return iframe;\n  } else {\n    // Handle direct video file (.mp4, .webm)\n    const video = document.createElement(\"video\");\n    video.src = videoObj.url;\n    video.controls = true;\n    video.className = \"chatbot-video\";\n    video.style.maxWidth = styleOverrides.maxWidth || \"250px\";\n    video.style.borderRadius = styleOverrides.borderRadius || \"8px\";\n    video.style.marginTop = styleOverrides.marginTop || \"8px\";\n\n    // Optional autoplay (muted)\n    if (videoObj.autoplay) {\n      video.muted = true;\n      video.autoplay = true;\n      video.addEventListener(\"canplay\", () => {\n        video.play().catch(err => console.log(\"Autoplay blocked\", err));\n      });\n    }\n\n    return video;\n  }\n}\n\n\n\nfunction createCarousel(carouselItems, sendMessageCallback, styleOverrides = {}) {\n  if (!carouselItems || carouselItems.length === 0) return null;\n  \n  const container = document.createElement('div');\n  container.className = 'chatbot-carousel-container';\n  applyStyles(container, 'carousel', 'container', styleOverrides.container);\n\n  carouselItems.forEach(item => {\n    const card = document.createElement('div');\n    card.className = 'chatbot-carousel-card';\n    applyStyles(card, 'carousel', 'card', styleOverrides.card);\n\n    if (item.image_url) {\n      const img = document.createElement('img');\n      img.src = item.image_url;\n      img.className = 'chatbot-carousel-card-image';\n      applyStyles(img, 'carousel', 'cardImage', styleOverrides.cardImage);\n      card.appendChild(img);\n    }\n\n    const content = document.createElement('div');\n    content.className = 'chatbot-carousel-card-content';\n    applyStyles(content, 'carousel', 'cardContent', styleOverrides.content);\n\n    const title = document.createElement('h3');\n    title.className = 'chatbot-carousel-card-title';\n    title.textContent = item.title;\n    applyStyles(title, 'carousel', 'cardTitle', styleOverrides.title);\n    content.appendChild(title);\n\n    if (item.subtitle) {\n      const subtitle = document.createElement('p');\n      subtitle.className = 'chatbot-carousel-card-subtitle';\n      subtitle.textContent = item.subtitle;\n      applyStyles(subtitle, 'carousel', 'cardSubtitle', styleOverrides.subtitle);\n      content.appendChild(subtitle);\n    }\n\n    if (item.buttons?.length > 0) {\n      const buttonsContainer = createButtons(item.buttons, sendMessageCallback, {\n        ...styleOverrides,\n        button: {\n          ...(item.button_style || {})\n        }\n      });\n      if (buttonsContainer) content.appendChild(buttonsContainer);\n    }\n    \n    card.appendChild(content);\n    container.appendChild(card);\n  });\n  \n  return container;\n}\n\nfunction createLocationsMap(locations, styleOverrides = {}) {\n  if (!locations || locations.length === 0) return null;\n\n  const locationContainer = document.createElement('div');\n  locationContainer.className = 'chatbot-location-cards';\n  applyStyles(locationContainer, 'locations', 'container', styleOverrides.container);\n\n  locations.forEach(location => {\n    const mapUrl = `https://www.google.com/maps?q=${location.lat},${location.lng}`;\n    const staticMap = `https://maps.googleapis.com/maps/api/staticmap?center=${location.lat},${location.lng}&zoom=14&size=400x200&markers=color:red%7C${location.lat},${location.lng}&key=AIzaSyCYVHw1tnbSZsihFfewNPwvuKc0iXx0ymw`;\n\n    const card = document.createElement('div');\n    card.className = 'chatbot-location-card';\n    applyStyles(card, 'locations', 'card', styleOverrides.card);\n\n    // Map image\n    const img = document.createElement('img');\n    img.src = staticMap;\n    img.alt = `${location.name} map`;\n    img.className = 'chatbot-location-map';\n    applyStyles(img, 'locations', 'map', styleOverrides.map);\n    card.appendChild(img);\n\n    // Card body\n    const body = document.createElement('div');\n    body.className = 'chatbot-location-body';\n    applyStyles(body, 'locations', 'body', styleOverrides.body);\n\n    // Title\n    const title = document.createElement('div');\n    title.className = 'chatbot-location-title';\n    title.textContent = location.name;\n    applyStyles(title, 'locations', 'title', styleOverrides.title);\n    body.appendChild(title);\n\n    // Address\n    if (location.address) {\n      const address = document.createElement('div');\n      address.className = 'chatbot-location-address';\n      address.textContent = location.address;\n      applyStyles(address, 'locations', 'address', styleOverrides.address);\n      body.appendChild(address);\n    }\n\n    // Button\n    const button = document.createElement('a');\n    button.href = mapUrl;\n    button.target = '_blank';\n    button.className = 'chatbot-location-button';\n    button.textContent = 'View on Map';\n    applyStyles(button, 'locations', 'button', {\n      backgroundColor: getChatbot().config.style?.messages?.buttonColor,\n      color: getChatbot().config.style?.messages?.buttonTextColor,\n      ...styleOverrides.button\n    });\n    body.appendChild(button);\n\n    card.appendChild(body);\n    locationContainer.appendChild(card);\n  });\n\n  return locationContainer;\n}\n\nfunction createFaqList(faqs, styleOverrides = {}) {\n    if (!faqs || faqs.length === 0) return null;\n    \n    const container = document.createElement('div');\n    container.className = 'chatbot-faq-list-container';\n    applyStyles(container, 'faq', 'container', styleOverrides.container);\n\n    faqs.forEach((faq, index) => {\n        const item = document.createElement('div');\n        item.className = 'chatbot-faq-item';\n        applyStyles(item, 'faq', 'item', styleOverrides.item);\n\n        const question = document.createElement('div');\n        question.className = 'chatbot-faq-question';\n        question.textContent = faq.question;\n        applyStyles(question, 'faq', 'question', styleOverrides.question);\n        item.appendChild(question);\n\n        const answer = document.createElement('div');\n        answer.className = 'chatbot-faq-answer';\n        answer.innerHTML = faq.answer;\n        applyStyles(answer, 'faq', 'answer', styleOverrides.answer);\n        item.appendChild(answer);\n\n        question.addEventListener('click', () => {\n            item.classList.toggle('expanded');\n            if (item.classList.contains('expanded')) {\n                applyStyles(answer, 'faq', 'expandedAnswer', styleOverrides.expandedAnswer);\n            } else {\n                applyStyles(answer, 'faq', 'answer', styleOverrides.answer);\n            }\n        });\n        \n        container.appendChild(item);\n    });\n    \n    return container;\n}\n\nfunction createTable(tableData, styleOverrides = {}) {\n    if (!tableData || !tableData.headers || !tableData.rows) return null;\n\n    const container = document.createElement('div');\n    container.className = 'chatbot-table-container';\n    applyStyles(container, 'table', 'container', styleOverrides.container);\n\n    const table = document.createElement('table');\n    table.className = 'chatbot-table';\n    applyStyles(table, 'table', 'table', styleOverrides.table);\n\n    const thead = document.createElement('thead');\n    const headerRow = document.createElement('tr');\n    tableData.headers.forEach(headerText => {\n        const th = document.createElement('th');\n        th.textContent = headerText;\n        applyStyles(th, 'table', 'header', {\n          backgroundColor: getChatbot().config.style?.messages?.buttonColor,\n          color: getChatbot().config.style?.messages?.buttonTextColor,\n          ...styleOverrides.header\n        });\n        headerRow.appendChild(th);\n    });\n    thead.appendChild(headerRow);\n    table.appendChild(thead);\n\n    const tbody = document.createElement('tbody');\n    tableData.rows.forEach(rowData => {\n        const tr = document.createElement('tr');\n        rowData.forEach(cellData => {\n            const td = document.createElement('td');\n            td.textContent = cellData;\n            applyStyles(td, 'table', 'cell', styleOverrides.cell);\n            tr.appendChild(td);\n        });\n        tbody.appendChild(tr);\n    });\n    table.appendChild(tbody);\n\n    container.appendChild(table);\n    return container;\n}\n\nfunction createRating(ratingData, sendMessageCallback, styleOverrides = {}) {\n    if (!ratingData || !ratingData.scale) return null;\n\n    const container = document.createElement('div');\n    container.className = 'chatbot-rating-container';\n    applyStyles(container, 'rating', 'container', styleOverrides.container);\n\n    const title = document.createElement('div');\n    title.className = 'chatbot-rating-title';\n    title.textContent = ratingData.title || 'Please rate:';\n    applyStyles(title, 'rating', 'title', styleOverrides.title);\n    container.appendChild(title);\n\n    const starsContainer = document.createElement('div');\n    starsContainer.className = 'chatbot-stars';\n    applyStyles(starsContainer, 'rating', 'starsContainer', styleOverrides.starsContainer);\n    let selectedRating = 0;\n\n    for (let i = ratingData.scale; i >= 1; i--) {\n        const star = document.createElement('span');\n        star.innerHTML = '&#9733;';\n        star.dataset.value = i;\n        applyStyles(star, 'rating', 'star', {\n          color: getChatbot().config.style?.messages?.buttonColor,\n          ...styleOverrides.star\n        });\n\n        star.addEventListener('mouseover', () => {\n            starsContainer.querySelectorAll('span').forEach(s => {\n                if (parseInt(s.dataset.value) >= i) {\n                    s.classList.add('hover');\n                    applyStyles(s, 'rating', 'starHover', {\n                      color: getChatbot().config.style?.themeColor,\n                      ...styleOverrides.starHover\n                    });\n                }\n            });\n        });\n\n        star.addEventListener('mouseout', () => {\n            starsContainer.querySelectorAll('span').forEach(s => {\n                s.classList.remove('hover');\n                applyStyles(s, 'rating', 'star', {\n                  color: getChatbot().config.style?.messages?.buttonColor,\n                  ...styleOverrides.star\n                });\n            });\n        });\n\n        star.addEventListener('click', () => {\n            selectedRating = i;\n            starsContainer.querySelectorAll('span').forEach(s => {\n                if (parseInt(s.dataset.value) <= selectedRating) {\n                    s.classList.add('selected');\n                    applyStyles(s, 'rating', 'starSelected', {\n                      color: getChatbot().config.style?.themeColor,\n                      ...styleOverrides.starSelected\n                    });\n                } else {\n                    s.classList.remove('selected');\n                    applyStyles(s, 'rating', 'star', {\n                      color: getChatbot().config.style?.messages?.buttonColor,\n                      ...styleOverrides.star\n                    });\n                }\n            });\n            if (sendMessageCallback) {\n                sendMessageCallback(`Rated ${selectedRating} stars`, `/rate_service{\"rating\":${selectedRating}}`);\n            }\n        });\n        starsContainer.appendChild(star);\n    }\n    container.appendChild(starsContainer);\n    return container;\n}\n\nfunction createDynamicForm(formData, sendMessageCallback, styleOverrides = {}) {\n  if (!formData || !Array.isArray(formData.fields) || formData.fields.length === 0 || !formData.submit_payload) return null;\n\n  const container = document.createElement('div');\n  container.className = 'chatbot-form-container';\n  applyStyles(container, 'form', 'container', styleOverrides.container);\n\n  if (formData.title) {\n    const title = document.createElement('div');\n    title.className = 'chatbot-form-title';\n    title.textContent = formData.title;\n    applyStyles(title, 'form', 'title', styleOverrides.title);\n    container.appendChild(title);\n  }\n\n  const form = document.createElement('form');\n  form.className = 'chatbot-form';\n  applyStyles(form, 'form', 'form', styleOverrides.form);\n\n  formData.fields.forEach(field => {\n    const fieldDiv = document.createElement('div');\n    fieldDiv.className = 'chatbot-form-field';\n    applyStyles(fieldDiv, 'form', 'field', styleOverrides.field);\n\n    if (field.label) {\n      const label = document.createElement('label');\n      label.textContent = field.label;\n      label.htmlFor = `chatbot-form-${field.field_name}`;\n      applyStyles(label, 'form', 'label', styleOverrides.label);\n      fieldDiv.appendChild(label);\n    }\n\n    let inputElement;\n    if (field.type === 'select' && Array.isArray(field.options)) {\n      inputElement = document.createElement('select');\n      inputElement.name = field.field_name;\n      inputElement.id = `chatbot-form-${field.field_name}`;\n      field.options.forEach(optionText => {\n        const option = document.createElement('option');\n        option.value = optionText;\n        option.textContent = optionText;\n        inputElement.appendChild(option);\n      });\n    } else if (field.type === 'textarea') {\n      inputElement = document.createElement('textarea');\n      inputElement.name = field.field_name;\n      inputElement.id = `chatbot-form-${field.field_name}`;\n      inputElement.placeholder = field.placeholder || '';\n      inputElement.required = !!field.required;\n    } else {\n      inputElement = document.createElement('input');\n      inputElement.type = field.type || 'text';\n      inputElement.name = field.field_name;\n      inputElement.id = `chatbot-form-${field.field_name}`;\n      inputElement.placeholder = field.placeholder || '';\n      inputElement.required = !!field.required;\n    }\n\n    applyStyles(inputElement, 'form', 'input', {\n      backgroundColor: getChatbot().config.style?.messages?.inputBackground,\n      color: getChatbot().config.style?.messages?.inputTextColor,\n      borderColor: getChatbot().config.style?.messages?.inputBorderColor,\n      ...styleOverrides.input\n    });\n\n    fieldDiv.appendChild(inputElement);\n    form.appendChild(fieldDiv);\n  });\n\n  const submitButton = document.createElement('button');\n  submitButton.type = 'submit';\n  submitButton.className = 'chatbot-form-submit-button';\n  submitButton.textContent = formData.submit_button_text || 'Submit';\n  applyStyles(submitButton, 'form', 'submitButton', {\n    backgroundColor: getChatbot().config.style?.messages?.buttonColor,\n    color: getChatbot().config.style?.messages?.buttonTextColor,\n    ...styleOverrides.submitButton\n  });\n  form.appendChild(submitButton);\n\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const formValues = {};\n    formData.fields.forEach(field => {\n      const input = form.querySelector(`[name=\"${field.field_name}\"]`);\n      if (input) formValues[field.field_name] = input.value;\n    });\n\n    if (sendMessageCallback) {\n      const userMessageText = `Submitted form: ${Object.entries(formValues).map(([key, value]) => `${key}: ${value}`).join(', ')}`;\n      const submitPayload = `${formData.submit_payload}${JSON.stringify(formValues)}`;\n      sendMessageCallback(userMessageText, submitPayload);\n    }\n    form.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);\n  });\n\n  container.appendChild(form);\n  return container;\n}\n","const BASE_URL = \"https://hydraulic-aqua-widescreen-michelle.trycloudflare.com\"; // or your backend URL\n\n\nconst chatbot_endpoints = {\n  chat: `${BASE_URL}/api/v1/chatbot/chat`,\n  config: `${BASE_URL}/api/v1/chatbot/config`,\n  config_key: `${BASE_URL}/api/v1/chatbot/chatbot/config`,\n  news: `${BASE_URL}/api/v1/chatbot/news`,\n  start: `${BASE_URL}/api/v1/chatbot/start`,\n\n\n};\n\n\n// wrap them all\nconst endpoints = {\n  chatbot: chatbot_endpoints,\n\n};\n\nexport default endpoints;\n","// src/chatbot.js - Enhanced with tabs, responsive design, and new features\nimport './chatbot.css';\nimport { parseMarkdown, generateUniqueId, setLocalStorageItem, getLocalStorageItem } from './utils';\nimport { renderMessage, renderCustomPayload } from './renderer';\nimport endpoints from './api/endpoints';\nlet authToken = null;\nlet is_first_log_in = true;\n\nclass ChatbotWidget {\n  constructor() {\n    this.config = {};\n    this.isOpen = false;\n    this.sessionId = null;\n    this.messages = [];\n    this.elements = {};\n    this.refreshInterval = null;\n    this.debug = true;\n    this.currentTab = 'home';\n    this.termsAccepted = false;\n    this.announcements = [];\n    this.userNotifications = [];\n    this.notifications = [\n      \"üëã !ŸÖÿ±ÿ≠ÿ®ÿßŸãÿå ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ\",\n      \"üõçÔ∏è ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßÿ≥ÿ™ŸÉÿ¥ÿßŸÅ ŸÖŸÜÿ™ÿ¨ÿßÿ™ŸÜÿß ÿßŸÑÿ¨ÿØŸäÿØÿ©ÿü\",\n      \"ü§î ŸáŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿ£Ÿä ÿ¥Ÿäÿ°ÿü\",\n      \"üí¨ !ÿ£ŸÜÿß ŸáŸÜÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÑÿØŸäŸÉ ÿ£ÿ≥ÿ¶ŸÑÿ©\",\n      \"üî• !ÿßÿ∑ŸÑÿπ ÿπŸÑŸâ ÿ£ÿ≠ÿØÿ´ ÿπÿ±Ÿàÿ∂ŸÜÿß\"\n    ];\n  }\n  async init() {\n    this.initConfig();\n    await this.loadConfig();\n    this.initSession();\n    \n    if (document.readyState === 'complete' || document.readyState === 'interactive') {\n      this.createWidgetUI();\n    } else {\n      document.addEventListener('DOMContentLoaded', () => {\n        console.log('DOM fully loaded, creating UI');\n        this.createWidgetUI();\n      });\n    }\n    \n    // Fallback timeout\n    setTimeout(() => {\n      if (!this.elements.container) {\n        console.warn('Fallback UI creation');\n        this.createWidgetUI();\n      }\n    }, 1000);\n\n    // Load announcements\n    console.log('Loading announcements...');\n    await this.loadAnnouncements();\n  }\n\n\n    //---------------------------- Configuration & Initialization ----------------------------//\n    // give the Configuration initial values from script tag and API\n  initConfig(apiConfig = {}) {\n    const scriptTag = document.querySelector('script[src*=\"chatbot.bundle.js\"]');\n    let scriptConfig = {};\n\n    if (scriptTag) {\n      const configJson = scriptTag.getAttribute('chatbot-config');\n      if (configJson) {\n        try {\n          scriptConfig = JSON.parse(configJson);\n        } catch (e) {\n          console.error('Chatbot SDK: Invalid JSON in chatbot-config attribute', e);\n        }\n      }\n    }\n\n    this.config = {\n      ...scriptConfig,\n      ...apiConfig\n    };\n\n    // Apply defaults if not set\n    this.config.botUrl = endpoints.chatbot.chat;\n    this.config.startingUrl = endpoints.chatbot.start; // New endpoint for starting messages\n    this.config.announcementsUrl = endpoints.chatbot.news;\n    this.config.themeColor = this.config.themeColor || '#020c15ff';\n    //console.log('Theme color set to:', this.config.themeColor);\n    this.config.position = this.config.position || 'bottom-right';\n    this.config.botName = this.config.botName || 'Chatbot';\n    console.log('botName:', this.config.botName);\n    this.config.inputPlaceholder = this.config.inputPlaceholder || 'Type your message...';\n    this.config.sendButtonText = this.config.sendButtonText || 'Send';\n  }\n  // Call API to get dynamic config and merge from the backend\n  async loadConfig() {\n    if (endpoints.chatbot.config) {\n      try {\n        this.log('Loading initial config from API');\n        const response = await fetch(`${endpoints.chatbot.config}?t=${Date.now()}`);\n        const apiConfig = await response.json();\n        this.mergeConfigs(apiConfig);\n        this.applyDynamicStyles();\n      } catch (error) {\n        this.log('Initial config load failed:', error);\n      }\n    }\n  }\n  // merge old config with new config from API and override old values \n  mergeConfigs(newConfig) {\n    this.config = {\n      ...this.config,\n      ...newConfig,\n      style: {\n        ...(this.config.style || {}),\n        ...(newConfig.style || {})\n      },\n      features: {\n        ...(this.config.features || {}),\n        ...(newConfig.features || {})\n      }\n    };\n    this.log('Merged config:', this.config);\n  }\n  // --- Dynamic Configuration ---\n  applyDynamicStyles() {\n    if (!this.config.style) {\n      this.log('No style configuration found');\n      return;\n    }\n\n    const root = document.documentElement;\n    const { style } = this.config;\n\n    if (style.themeColor) {\n    console.log('Applying theme color:', style.themeColor);\n      root.style.setProperty('--chatbot-theme-color', style.themeColor);\n      root.style.setProperty('--chatbot-theme-color-hover', this.adjustColor(style.themeColor, -20));\n    }\n\n    if (style.header?.backgroundColor) {\n        console.log('Applying theme color:', style.backgroundColor);\n      root.style.setProperty('--chatbot-header-bg', style.header.backgroundColor);\n    }\n\n    if (style.header?.textColor) {\n      root.style.setProperty('--chatbot-header-text', style.header.textColor);\n    }\n\n    if (style.bubble?.color) {\n      root.style.setProperty('--chatbot-bubble-color', style.bubble.color);\n    }\n\n    if (style.messages?.userBubbleColor) {\n      root.style.setProperty('--chatbot-user-bubble', style.messages.userBubbleColor);\n    }\n\n    if (style.messages?.botBubbleColor) {\n      root.style.setProperty('--chatbot-bot-bubble', style.messages.botBubbleColor);\n    }\n  }\n\n  async refreshConfig() {\n    try {\n      this.log('Refreshing configuration...');\n      const response = await fetch(`${this.config.configApiUrl}?t=${Date.now()}`);\n      const newConfig = await response.json();\n      this.mergeConfigs(newConfig);\n      this.applyDynamicStyles();\n      this.updateUIElements();\n      this.log('Configuration refreshed successfully');\n      return true;\n    } catch (error) {\n      this.log('Failed to refresh config:', error);\n      return false;\n    }\n  }\n\n//------------------------------------------------------------------------//\n\n    // --- Session Management ---\n  initSession() {\n    this.sessionId = getLocalStorageItem('chatbot_session_id');\n    if (!this.sessionId) {\n      this.sessionId = generateUniqueId();\n      setLocalStorageItem('chatbot_session_id', this.sessionId);\n    }\n    this.messages = getLocalStorageItem(`chatbot_conversation_${this.sessionId}`) || [];\n  }\n\n  startMessageCycle() {\n    // CLEAR ANY EXISTING INTERVAL FIRST\n    if (this.messageInterval) {\n      clearInterval(this.messageInterval);\n      this.messageInterval = null;\n    }\n    \n    if (this.isOpen) return;\n    \n    // Reset index to start from beginning\n    this.currentMessageIndex = 0;\n    \n    // Show first message immediately\n    this.showNextMessage();\n    \n    // Set interval to show next message every 5 seconds\n    this.messageInterval = setInterval(() => {\n      if (!this.isOpen) {\n        this.showNextMessage();\n      } else {\n        // If chat opened, stop the interval\n        this.stopMessageCycle();\n      }\n    }, 5000);\n  }\n\n  showNextMessage() {\n    if (!this.elements.messageBubble) return;\n    \n    // Hide current message with animation\n    this.elements.messageBubble.style.opacity = '0';\n    this.elements.messageBubble.style.transform = 'translateY(-50%) translateX(20px) scale(0.8)';\n    \n    setTimeout(() => {\n      // Update message text\n      this.elements.messageBubble.innerHTML = `\n        <span>${this.notifications[this.currentMessageIndex]}</span>\n        <div style=\"position: absolute; top: 50%; right: -8px; transform: translateY(-50%); width: 0; height: 0; border-left: 8px solid white; border-top: 8px solid transparent; border-bottom: 8px solid transparent;\"></div>\n      `;\n      \n      // Show message with animation\n      this.elements.messageBubble.style.opacity = '1';\n      this.elements.messageBubble.style.transform = 'translateY(-50%) translateX(0) scale(1)';\n      \n      // Move to next message for the NEXT call\n      this.currentMessageIndex = (this.currentMessageIndex + 1) % this.notifications.length;\n      \n      // Debug: Log current message index\n      console.log('Showing message:', this.currentMessageIndex - 1 < 0 ? this.notifications.length - 1 : this.currentMessageIndex - 1);\n      \n    }, 400);\n  }\n\n  stopMessageCycle() {\n    if (this.messageInterval) {\n      clearInterval(this.messageInterval);\n      this.messageInterval = null;\n    }\n    \n    // Hide current message\n    if (this.elements.messageBubble) {\n      this.elements.messageBubble.style.opacity = '0';\n      this.elements.messageBubble.style.transform = 'translateY(-50%) translateX(20px) scale(0.8)';\n    }\n  }\n\n  log(...args) {\n    if (this.debug) console.log('[Chatbot]', ...args);\n  }\n\n\n\n\n\n  // --- Announcements Management ---\n  async loadAnnouncements() {\n    try {\n      const response = await fetch(this.config.announcementsUrl, {\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      });\n\n      if (response.ok) {\n        const announcements = await response.json();\n        this.announcements = announcements.sort((a, b) => new Date(b.date) - new Date(a.date));\n        this.renderAnnouncements();\n      }\n    } catch (error) {\n      console.error('Failed to load announcements:', error);\n    }\n  }\n\n  renderAnnouncements() {\n  const announcementsContent = this.elements.announcementsContent;\n  if (!announcementsContent) return;\n\n  const container = announcementsContent.querySelector('.chatbot-announcements-list');\n  if (!container) return;\n\n  container.innerHTML = '';\n  // Add a class for the specific scroll effect\n  container.classList.add('scroll-stack-list');\n\n  if (this.announcements.length === 0) {\n    container.innerHTML = `\n      <div class=\"chatbot-announcements-empty\">\n        <div class=\"chatbot-announcements-empty-icon\">üì¢</div>\n        <p>No announcements available at the moment.</p>\n      </div>\n    `;\n    return;\n  }\n\n  this.announcements.forEach((announcement, index) => {\n    const card = document.createElement('div');\n    card.className = 'chatbot-announcement-card';\n    card.style.animationDelay = `${index * 0.1}s`;\n\n    const imageSection = announcement.image \n      ? `<div class=\"chatbot-announcement-image\" style=\"background-image: url('${announcement.image}')\"></div>`\n      : `<div class=\"chatbot-announcement-image chatbot-announcement-default-icon\">üì¢</div>`;\n\n    card.innerHTML = `\n    \n      ${imageSection}\n      <div class=\"chatbot-announcement-content\">\n        <div class=\"chatbot-announcement-title\">${announcement.text || 'Announcement'}</div>\n        <div class=\"chatbot-announcement-description\">${announcement.description || ''}</div>\n        <div class=\"chatbot-announcement-date\">${this.formatDate(announcement.date)}</div>\n      </div>\n    `;\n\n    container.appendChild(card);\n  });\n}\n  formatDate(dateString) {\n    if (!dateString) return '';\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', { \n        year: 'numeric', \n        month: 'short', \n        day: 'numeric' \n      });\n    } catch (error) {\n      return dateString;\n    }\n  }\n\n\n\n  adjustColor(color, amount) {\n    return '#' + color.replace(/^#/, '').replace(/../g, colorHex => \n      ('0' + Math.min(255, Math.max(0, parseInt(colorHex, 16) + amount)).toString(16)).slice(-6));\n  }\n\n  // --- UI Management ---\n  createWidgetUI() {\n    console.log('Creating widget UI...');\n    console.log('Config:', this.config);\n  \n    const container = document.createElement('div');\n    container.id = 'chatbot-widget-container';\n    console.log('Container created:', container);\n\n    container.classList.add(`chatbot-position-${this.config.position}`);\n    container.style.display = 'none';\n    container.style.opacity = '0';\n\n    document.body.appendChild(container);\n    this.elements.container = container;\n    \n    setTimeout(() => {\n      const computedStyle = window.getComputedStyle(this.elements.container);\n      console.log('Computed styles:', {\n        display: computedStyle.display,\n        opacity: computedStyle.opacity,\n        zIndex: computedStyle.zIndex,\n        visibility: computedStyle.visibility\n      });\n    }, 500);\n\n    // Apply animation settings\n    const animation = this.config.style?.animation || { type: 'fade-in', duration: 300 };\n    if (animation.type) {\n      container.style.transition = `all ${animation.duration}ms ease`;\n    }\n\n    // Create Chat Bubble\n    const bubble = document.createElement('div');\n    bubble.className = 'chatbot-bubble';\n    const bubbleStyle = this.config.style?.bubble || {};\n    bubble.style.width = bubbleStyle.size || '60px';\n    bubble.style.height = bubbleStyle.size || '60px';\n    bubble.style.backgroundColor = bubbleStyle.color || 'var(--chatbot-theme-color)';\n    \n    if (bubbleStyle.icon) {\n      bubble.innerHTML = bubbleStyle.icon.startsWith('http') ? \n        `<img src=\"${bubbleStyle.icon}\" alt=\"Chat\" style=\"width: 70%; height: 70%;\">` : \n        bubbleStyle.icon;\n    } else {\n      bubble.innerHTML = `\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\">\n          <path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z\"/>\n        </svg>\n      `;\n    }\n    \n    const messageBubble = document.createElement('div');\n    messageBubble.className = 'chatbot-message';\n    messageBubble.style.cssText = `\n      position: absolute;\n      right: 90px;\n      top: 50%;\n      transform: translateY(-50%) translateX(20px) scale(0.8);\n      background: white;\n      padding: 12px 16px;\n      border-radius: 20px;\n      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n      max-width: 250px;\n      opacity: 0;\n      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n      font-size: 14px;\n      color: #333;\n      border: 1px solid #e0e0e0;\n      white-space: nowrap;\n      pointer-events: none;\n      z-index: 999;\n    `;\n\n    messageBubble.innerHTML = '<div style=\"position: absolute; top: 50%; right: -8px; transform: translateY(-50%); width: 0; height: 0; border-left: 8px solid white; border-top: 8px solid transparent; border-bottom: 8px solid transparent;\"></div>';\n\n    bubble.addEventListener('click', () => this.toggleChatWindow());\n\n    // ADD THIS: Append both elements\n    container.appendChild(messageBubble);\n    container.appendChild(bubble);\n\n    this.elements.bubble = bubble;\n    this.elements.messageBubble = messageBubble; // ADD THIS LINE\n\n    setTimeout(() => this.startMessageCycle(), 3000);\n\n    // Create Chat Window with tabs\n    const windowEl = document.createElement('div');\n    windowEl.className = 'chatbot-window';\n    \n    const headerStyle = this.config.style?.header || {};\n    windowEl.innerHTML = `\n      <div class=\"chatbot-header\" style=\"\n        ${headerStyle.backgroundColor ? `background-color: ${headerStyle.backgroundColor};` : ''}\n        ${headerStyle.textColor ? `color: ${headerStyle.textColor};` : ''}\n      \">\n        <div class=\"chatbot-header-top\">\n          ${headerStyle.icon ? \n            `<img src=\"${headerStyle.icon}\" class=\"chatbot-header-icon\" \n              style=\"width: ${headerStyle.iconSize || '30px'}; height: ${headerStyle.iconSize || '30px'};\">` : ''}\n          <span class=\"chatbot-header-title\">${this.config.botName}</span>\n          <button class=\"chatbot-header-close\" style=\"\n            ${headerStyle.textColor ? `color: ${headerStyle.textColor};` : ''}\n          \">&times;</button>\n        </div>\n\n      </div>\n      \n      <div class=\"chatbot-content\">\n        <!-- Home Tab -->\n        <div class=\"chatbot-tab-content active\" data-content=\"home\">\n          <div class=\"chatbot-home-content\">\n            <div class=\"chatbot-home-welcome\">\n              <h2>Welcome!</h2>\n              <p>How can we help you today?</p>\n            </div>\n            \n            <div class=\"chatbot-actions-grid\">\n              <div class=\"chatbot-action-card\" data-action=\"start-chat\">\n                <span class=\"chatbot-action-icon\">üí¨</span>\n                <div class=\"chatbot-action-title\">Start Chat</div>\n                <div class=\"chatbot-action-desc\">Begin a conversation with our assistant</div>\n              </div>\n              <div class=\"chatbot-action-card\" data-action=\"check-products\">\n                <span class=\"chatbot-action-icon\">üè™</span>\n                <div class=\"chatbot-action-title\">Our Products</div>\n                <div class=\"chatbot-action-desc\">Explore our product offerings</div>\n              </div>\n              <div class=\"chatbot-action-card\" data-action=\"contact-us\">\n                <span class=\"chatbot-action-icon\">üìû</span>\n                <div class=\"chatbot-action-title\">Contact Us</div>\n                <div class=\"chatbot-action-desc\">Get in touch with support</div>\n              </div>\n              <div class=\"chatbot-action-card\" data-action=\"faq\">\n                <span class=\"chatbot-action-icon\">‚ùì</span>\n                <div class=\"chatbot-action-title\">FAQ</div>\n                <div class=\"chatbot-action-desc\">Find answers to common questions</div>\n              </div>\n            </div>\n            \n            <div class=\"chatbot-user-actions\" style=\"display: none;\">\n              <h3>Your Account</h3>\n              <div class=\"chatbot-user-notifications\"></div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Chat Tab -->\n        <div class=\"chatbot-tab-content\" data-content=\"chat\">\n          <div class=\"chatbot-chat-content\">\n            <div class=\"chatbot-messages\"></div>\n            <div class=\"chatbot-input-area\">\n              <input type=\"text\" placeholder=\"${this.config.inputPlaceholder}\" />\n              <button class=\"chatbot-send-button\">${this.config.sendButtonText}</button>\n            </div>\n          </div>\n          \n          <!-- Terms Overlay -->\n          <div class=\"chatbot-terms-overlay\">\n            <div class=\"chatbot-terms-content\">\n              <div class=\"chatbot-terms-title\">Terms & Conditions</div>\n              <div class=\"chatbot-terms-text\">\n                Before we start, and for your protection, please don't type any account or card numbers on the screen or any of your PINs. Please also note that we will be keeping a record of this conversation for service quality purposes. I am here to help you with general inquiries about the Bank, its products and services. If you need to access your bank accounts or cards,\n              </div>\n              <div class=\"chatbot-terms-text\">\n                Dear customer, in order to ensure the confidentiality of your data, please do not share the three numbers on the back of the credit or debit card, the OTP or the password for the smart wallet service or the Internet banking with anyone, whether by phone, text message or e-mail and in case that this data is requested by any means of communication, please contact 19666 as soon as possible.\n              </div>\n              <div class=\"chatbot-terms-buttons\">\n                <button class=\"chatbot-terms-accept\">I Agree</button>\n                <button class=\"chatbot-terms-decline\">Decline</button>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Announcements Tab -->\n        <div class=\"chatbot-tab-content\" data-content=\"announcements\">\n          <div class=\"chatbot-announcements-content\">\n            <div class=\"chatbot-announcements-list\"></div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"chatbot-footer\" style=\"\n        text-align: center;\n        padding: 10px;\n        font-size: 12px;\n        font-family: 'Segoe UI', sans-serif;\n        background: #fdfdfd;\n      \">\n        <div class=\"chatbot-tabs\">\n          <button class=\"chatbot-tab active\" data-tab=\"home\">Home</button>\n          <button class=\"chatbot-tab\" data-tab=\"chat\">Chat</button>\n          <button class=\"chatbot-tab\" data-tab=\"announcements\">News</button>\n        </div>\n        <span style=\"\n            background: linear-gradient(90deg, #4a90e2, #9013fe, #ff4081);\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n            font-weight: bold;\n            font-style: italic;\n            font-size: 1.1em;\n            animation: shimmer 3s infinite;\n            background-size: 200% auto;\n            display:inline-block;\n        \">Powered by FinovaX ‚ú®</span>\n      </div>\n    `;\n\n    container.appendChild(windowEl);\n    this.elements.window = windowEl;\n    this.elements.messagesContainer = windowEl.querySelector('.chatbot-messages');\n    this.elements.inputField = windowEl.querySelector('.chatbot-input-area input');\n    this.elements.sendButton = windowEl.querySelector('.chatbot-input-area button');\n    this.elements.closeButton = windowEl.querySelector('.chatbot-header-close');\n    this.elements.headerTitle = windowEl.querySelector('.chatbot-header-title');\n    this.elements.homeContent = windowEl.querySelector('[data-content=\"home\"]');\n    this.elements.chatContent = windowEl.querySelector('[data-content=\"chat\"]');\n    this.elements.announcementsContent = windowEl.querySelector('[data-content=\"announcements\"]');\n    this.elements.termsOverlay = windowEl.querySelector('.chatbot-terms-overlay');\n    this.elements.userActions = windowEl.querySelector('.chatbot-user-actions');\n    this.elements.userNotifications = windowEl.querySelector('.chatbot-user-notifications');\n\n    // Event Listeners\n    this.setupEventListeners();\n\n    // Render messages and show\n    this.messages.forEach(msg => this.displayMessage(msg, false));\n    this.scrollToBottom();\n    this.showWidget();\n\n    // Start auto-refresh if configured\n    if (this.config.autoRefresh) {\n      this.startAutoRefresh(this.config.autoRefreshInterval || 300000);\n    }\n  }\n\n  setupEventListeners() {\n    // Close button\n    this.elements.closeButton.addEventListener('click', () => this.toggleChatWindow());\n    \n    // Send message\n    this.elements.sendButton.addEventListener('click', () => this.sendMessage());\n    this.elements.inputField.addEventListener('keypress', (e) => {\n      if (e.key === 'Enter') this.sendMessage();\n    });\n\n    // Tab navigation\n    const tabs = this.elements.window.querySelectorAll('.chatbot-tab');\n    tabs.forEach(tab => {\n      tab.addEventListener('click', () => {\n        const tabName = tab.dataset.tab;\n        this.switchTab(tabName);\n      });\n    });\n\n    // Home actions\n    const actionCards = this.elements.window.querySelectorAll('.chatbot-action-card');\n    actionCards.forEach(card => {\n      card.addEventListener('click', () => {\n        const action = card.dataset.action;\n        this.handleHomeAction(action);\n      });\n    });\n\n    // Terms acceptance\n    const termsAccept = this.elements.window.querySelector('.chatbot-terms-accept');\n    const termsDecline = this.elements.window.querySelector('.chatbot-terms-decline');\n    \n    termsAccept.addEventListener('click', () => {\n      this.termsAccepted = true;\n      this.elements.termsOverlay.style.display = 'none';\n    });\n    \n    termsDecline.addEventListener('click', () => {\n      this.switchTab('home');\n    });\n  }\n\n  switchTab(tabName) {\n    // Update active tab button\n    const tabs = this.elements.window.querySelectorAll('.chatbot-tab');\n    tabs.forEach(tab => {\n      tab.classList.toggle('active', tab.dataset.tab === tabName);\n    });\n\n    // Update active content\n    const contents = this.elements.window.querySelectorAll('.chatbot-tab-content');\n    contents.forEach(content => {\n      content.classList.toggle('active', content.dataset.content === tabName);\n    });\n\n    this.currentTab = tabName;\n\n    // Handle tab-specific actions\n    if (tabName === 'chat') {\n      if (!this.termsAccepted) {\n        this.elements.termsOverlay.style.display = 'flex';\n      }\n      // Always scroll to bottom when opening chat tab\n      setTimeout(() => {\n        this.scrollToBottom();\n      }, 100);\n    }\n\n\n    if (tabName === 'announcements' && this.announcements.length === 0) {\n      this.loadAnnouncements();\n    }\n  }\n\n  handleHomeAction(action) {\n    switch (action) {\n      case 'start-chat':\n        this.switchTab('chat');\n        break;\n      case 'check-products':\n        this.switchTab('chat');\n        if (this.termsAccepted) {\n          setTimeout(() => {\n            this.sendMessage('Show me your products', '/list_product_list');\n          }, 500);\n        }\n        break;\n      case 'contact-us':\n        this.switchTab('chat');\n        if (this.termsAccepted) {\n          setTimeout(() => {\n            this.sendMessage('I need to contact support', '/contact_support');\n          }, 500);\n        }\n        break;\n      case 'faq':\n        this.switchTab('chat');\n        if (this.termsAccepted) {\n          setTimeout(() => {\n            this.sendMessage('Show me frequently asked questions', '/show_faq');\n          }, 500);\n        }\n        break;\n    }\n  }\n\n  async loadUserNotifications() {\n    if (!authToken) return;\n\n    try {\n      const response = await fetch(this.config.startingUrl, {\n        method: 'GET',\n        headers: { \n          'Content-Type': 'application/json',\n          'authorization': `Bearer ${authToken}`\n        },\n      });\n\n      if (response.ok) {\n        const notifications = await response.json();\n        this.userNotifications = notifications;\n        \n        this.renderUserNotifications();\n      }\n    } catch (error) {\n      console.error('Failed to load user notifications:', error);\n    }\n  }\n\n  renderUserNotifications() {\n    if (!this.elements.userActions || !this.elements.userNotifications) return;\n\n    // Clear existing notifications\n    this.elements.userNotifications.innerHTML = '';\n    \n    // Flatten the notifications into a single array of actionable items\n    const actionableItems = [];\n    this.userNotifications.forEach(notification => {\n      // Add the main notification text as a standalone card if it exists\n      if (notification.text) {\n        actionableItems.push({\n          text: notification.text,\n          url: null // No action for the main text\n        });\n      }\n      // Add each button as a separate actionable item\n      if (notification.buttons) {\n        notification.buttons.forEach(btn => {\n          actionableItems.push({\n            text: btn.title,\n            url: btn.url,\n          });\n        });\n      }\n    });\n\n    if (actionableItems.length === 0) {\n      this.elements.userActions.style.display = 'none';\n      return;\n    }\n\n    this.elements.userActions.style.display = 'block';\n\n    actionableItems.forEach(item => {\n      const card = document.createElement('div');\n      card.className = 'chatbot-notification-card';\n      \n      // Add the notification text\n      const textDiv = document.createElement('div');\n      textDiv.className = 'chatbot-notification-text';\n      textDiv.textContent = item.text;\n      card.appendChild(textDiv);\n      \n      // Add a button if a URL is available\n      if (item.url) {\n        const actionButton = document.createElement('button');\n        actionButton.className = 'chatbot-notification-button';\n        actionButton.textContent = 'View Details'; // A generic, actionable text\n        actionButton.onclick = () => window.open(item.url, '_blank');\n        card.appendChild(actionButton);\n      }\n      \n      this.elements.userNotifications.appendChild(card);\n    });\n  }\n\n  updateUIElements() {\n    if (this.elements.headerTitle) {\n      this.elements.headerTitle.textContent = this.config.botName;\n    }\n    \n    if (this.elements.inputField) {\n      this.elements.inputField.placeholder = this.config.inputPlaceholder;\n    }\n    \n    if (this.elements.sendButton) {\n      this.elements.sendButton.textContent = this.config.sendButtonText;\n    }\n  }\n\n  showWidget() {\n    console.log('Attempting to show widget...');\n\n    // Force visibility for debugging\n    this.elements.container.style.display = 'block';\n    this.elements.container.style.opacity = '1';\n    this.elements.container.style.zIndex = '99999';\n    \n    // Original animation code\n    const animation = this.config.style?.animation || { type: 'fade-in', duration: 300 };\n    console.log('Using animation:', animation);\n\n    this.elements.container.style.display = 'block';\n    \n    if (animation.type === 'fade-in') {\n      setTimeout(() => {\n        this.elements.container.style.opacity = '1';\n      }, 50);\n    } else if (animation.type === 'slide-up') {\n      this.elements.container.style.transform = 'translateY(20px)';\n      setTimeout(() => {\n        this.elements.container.style.transition = `all ${animation.duration}ms ease`;\n        this.elements.container.style.opacity = '1';\n        this.elements.container.style.transform = 'translateY(0)';\n      }, 50);\n    } else {\n      this.elements.container.style.opacity = '1';\n    }\n  }\n\n  // --- Auto Refresh ---\n  startAutoRefresh(interval = 300000) {\n    this.stopAutoRefresh();\n    this.refreshInterval = setInterval(() => this.refreshConfig(), interval);\n    this.log(`Started auto-refresh every ${interval/1000} seconds`);\n  }\n\n  stopAutoRefresh() {\n    if (this.refreshInterval) {\n      clearInterval(this.refreshInterval);\n      this.refreshInterval = null;\n    }\n  }\n\n\n\n  // --- Message Handling ---\n  displayMessage(message, save = true) {\n    const messageElement = document.createElement('div');\n    messageElement.classList.add('chatbot-message', message.sender === 'user' ? 'user' : 'bot');\n\n    if (message.text) {\n      const textContent = document.createElement('div');\n      textContent.innerHTML = parseMarkdown(message.text);\n      messageElement.appendChild(textContent);\n    }\n\n    if (message.buttons?.length > 0) {\n      const buttonContainer = renderMessage(message, 'buttons', this.sendMessage.bind(this));\n      if (buttonContainer) messageElement.appendChild(buttonContainer);\n    }\n    \n    if (message.image) {\n      const imageEl = renderMessage(message, 'image');\n      if (imageEl) messageElement.appendChild(imageEl);\n    }\n    \n    if (message.video) {\n      const videoEl = renderMessage(message, 'video');\n      if (videoEl) messageElement.appendChild(videoEl);\n    }\n    \n    if (message.carousel?.length > 0) {\n      const carouselEl = renderMessage(message, 'carousel', this.sendMessage.bind(this));\n      if (carouselEl) messageElement.appendChild(carouselEl);\n    }\n    \n    if (message.custom) {\n      const customEl = renderCustomPayload(message.custom, this.sendMessage.bind(this));\n      if (customEl) messageElement.appendChild(customEl);\n    }\n\n    this.elements.messagesContainer.appendChild(messageElement);\n    \n    if (save) {\n      this.messages.push(message);\n      setLocalStorageItem(`chatbot_conversation_${this.sessionId}`, this.messages);\n    }\n    \n    this.scrollToBottom();\n  }\n\n  async sendSuggestions() {\n    try {\n      const response = await fetch(this.config.startingUrl, {\n        method: 'GET',\n        headers: { \n          'Content-Type': 'application/json',\n          'authorization': `Bearer ${authToken}`\n        },\n      });\n\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n\n      const botResponses = await response.json();\n      if (botResponses?.length > 0) {\n        console.log(authToken+\" --- IGNORE ---\");\n        botResponses.forEach(response => this.displayMessage({ sender: 'bot', ...response }));\n      } else {\n        this.displayMessage({ sender: 'bot', text: \"Sorry, I didn't get a response.\" });\n      }\n    } catch (error) {\n      console.error('Chatbot error:', error);\n      this.displayMessage({ \n        sender: 'bot', \n        text: \"I'm having trouble connecting. Please try again later.\" \n      });\n    }\n  }\n\n  async sendMessage(text = null, payload = null) {\n    let messageText = text || this.elements.inputField.value.trim();\n    if (!messageText && !payload) return;\n\n    const userMessage = { sender: 'user', text: messageText };\n    this.displayMessage(userMessage);\n    this.elements.inputField.value = '';\n\n    const requestBody = {\n      sender: this.sessionId,\n      message: messageText,\n      ...(payload && { customData: { payload } })\n    };\n\n    try {\n      const response = await fetch(this.config.botUrl, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(requestBody),\n      });\n\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n\n      const botResponses = await response.json();\n      if (botResponses?.length > 0) {\n        console.log(authToken+\" --- IGNORE ---\");\n        botResponses.forEach(response => this.displayMessage({ sender: 'bot', ...response }));\n      } else {\n        this.displayMessage({ sender: 'bot', text: \"Sorry, I didn't get a response.\" });\n      }\n    } catch (error) {\n      console.error('Chatbot error:', error);\n      this.displayMessage({ \n        sender: 'bot', \n        text: \"I'm having trouble connecting. Please try again later.\" \n      });\n    }\n  }\n\n  // --- UI Controls ---\n  toggleChatWindow() {\n    this.isOpen = !this.isOpen;\n    this.elements.window.classList.toggle('open', this.isOpen);\n    this.elements.bubble.classList.toggle('hidden', this.isOpen);\n\n    if (this.isOpen) {\n      if (is_first_log_in && authToken) {\n        is_first_log_in = false;\n        this.sendSuggestions();\n      }\n      this.stopMessageCycle();\n\n      this.elements.inputField.focus();\n      this.scrollToBottom();\n    }else {\n        setTimeout(() => {\n          if (!this.isOpen) { // Double-check chat is still closed\n            this.startMessageCycle();\n          }\n        }, 2000);\n    }\n  }\n\n  scrollToBottom() {\n    if (this.elements.messagesContainer) {\n      this.elements.messagesContainer.scrollTop = this.elements.messagesContainer.scrollHeight;\n    }\n  }\n}\n\n// Initialize\n\nwindow.ChatbotSDK = new ChatbotWidget();\nwindow.ChatbotSDK.init();\n\n\n\n(function() {\n  const chatbotContainer = document.getElementById('chatbotContainer');\n\n  // Public function to set the authentication token inside the SDK\n  window.setChatbotAuthToken = function(token) {\n    authToken = token;\n    console.log(\"Chatbot SDK received a token. Saved locally.\");\n    console.log(\"Simulated Chatbot Auth Token:\", authToken);\n    \n    // Reload user notifications if widget is open\n    if (window.ChatbotSDK && window.ChatbotSDK.isOpen && authToken && is_first_log_in) {\n        is_first_log_in = false;\n      window.ChatbotSDK.sendSuggestions();\n    }\n  };\n  \n  // Initial chatbot state when the page loads\n  console.log(\"Chatbot SDK loaded. Chatbot is running but currently unauthenticated.\");\n})();"],"names":["setLocalStorageItem","key","value","localStorage","setItem","JSON","stringify","e","console","warn","getLocalStorageItem","item","getItem","parse","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","getChatbot","window","ChatbotSDK","config","applyStyles","element","component","elementType","messageStyles","chatbot","configStyles","components","styles","getDefaultStyles","messages","Object","entries","forEach","prop","startsWith","setProperty","globalStyles","defaults","backgroundColor","buttonColor","color","buttonTextColor","botBubbleColor","botTextColor","renderMessage","messageData","sendMessageCallback","createButtons","buttons","imageUrl","styleOverrides","img","src","className","createImage","image","createVideo","video","carouselItems","length","container","card","image_url","cardImage","content","title","textContent","subtitle","buttonsContainer","button","button_style","createCarousel","carousel","renderCustomPayload","customPayload","customContainer","classList","add","locations","mapEl","locationContainer","location","mapUrl","lat","lng","staticMap","alt","name","map","body","address","href","target","createLocationsMap","faq_list","faqEl","faqs","faq","index","question","answer","innerHTML","addEventListener","toggle","contains","expandedAnswer","createFaqList","table","tableEl","tableData","headers","rows","thead","headerRow","headerText","th","header","tbody","rowData","tr","cellData","td","cell","createTable","rating","ratingEl","ratingData","scale","starsContainer","selectedRating","i","star","dataset","querySelectorAll","s","parseInt","themeColor","starHover","remove","starSelected","createRating","forms","formEl","formData","Array","isArray","fields","submit_payload","form","field","fieldDiv","label","htmlFor","field_name","inputElement","options","id","optionText","option","placeholder","required","inputBackground","inputTextColor","borderColor","inputBorderColor","input","submitButton","submit_button_text","preventDefault","formValues","querySelector","userMessageText","join","submitPayload","el","disabled","createDynamicForm","videoEl","children","btn","button_color","payload","b","url","open","videoObj","includes","videoId","split","pop","iframe","width","height","allow","allowFullscreen","controls","maxWidth","borderRadius","marginTop","autoplay","muted","play","catch","err","log","BASE_URL","endpoints","chat","config_key","news","start","authToken","is_first_log_in","constructor","this","isOpen","sessionId","elements","refreshInterval","debug","currentTab","termsAccepted","announcements","userNotifications","notifications","init","initConfig","loadConfig","initSession","readyState","createWidgetUI","setTimeout","loadAnnouncements","apiConfig","scriptTag","scriptConfig","configJson","getAttribute","error","botUrl","startingUrl","announcementsUrl","position","botName","inputPlaceholder","sendButtonText","response","fetch","Date","now","json","mergeConfigs","applyDynamicStyles","newConfig","features","root","documentElement","adjustColor","textColor","bubble","userBubbleColor","refreshConfig","configApiUrl","updateUIElements","replace","c","r","Math","random","toString","startMessageCycle","messageInterval","clearInterval","currentMessageIndex","showNextMessage","setInterval","stopMessageCycle","messageBubble","opacity","transform","args","method","ok","sort","a","date","renderAnnouncements","announcementsContent","announcement","animationDelay","imageSection","text","description","formatDate","dateString","toLocaleDateString","year","month","day","amount","colorHex","min","max","slice","display","computedStyle","getComputedStyle","zIndex","visibility","animation","duration","transition","bubbleStyle","size","icon","toggleChatWindow","windowEl","headerStyle","iconSize","messagesContainer","inputField","sendButton","closeButton","headerTitle","homeContent","chatContent","termsOverlay","userActions","setupEventListeners","msg","displayMessage","scrollToBottom","showWidget","autoRefresh","startAutoRefresh","autoRefreshInterval","sendMessage","tab","tabName","switchTab","action","handleHomeAction","termsAccept","termsDecline","loadUserNotifications","authorization","renderUserNotifications","actionableItems","notification","push","textDiv","actionButton","onclick","interval","stopAutoRefresh","message","save","messageElement","sender","html","parseMarkdown","buttonContainer","bind","imageEl","carouselEl","custom","customEl","sendSuggestions","Error","status","botResponses","messageText","trim","userMessage","requestBody","customData","focus","scrollTop","scrollHeight","getElementById","setChatbotAuthToken","token"],"mappings":"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"}